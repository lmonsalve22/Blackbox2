
@{
    Layout = null;
}

<!doctype html>
<html amp lang="es">
<head>
    <meta charset="utf-8">
    <script async src="https://cdn.ampproject.org/v0.js"></script>
    <title>Medios</title>
    <link rel="canonical" href="https://www.dataintelligence-group.com/Contenido/Medios3Amp">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="application/ld+json">
        {
          "@@context": "http://schema.org",
          "@@type": "NewsArticle",
          "headline": "Article headline",
          "datePublished": "2021-11-20T12:02:41Z",
               "image": [
            "~/Images/favicons/Icono_dataIntelligence_Rojo.png"
              ],
            "author": {
                "@@type": "Organization",
                "name": "Data Intelligence",
                "url": "https://www.dataintelligence-group.com/Data/Index"
            },
        "publisher": {
            "@@type": "Organization",
            "name": "DI",
            "logo": {
            "@@type": "ImageObject",
            "url": "~/Images/favicons/Icono_dataIntelligence_Rojo.png"
            }
        }
        }
    </script>
    <style amp-boilerplate>
        body {
            -webkit-animation: -amp-start 8s steps(1,end) 0s 1 normal both;
            -moz-animation: -amp-start 8s steps(1,end) 0s 1 normal both;
            -ms-animation: -amp-start 8s steps(1,end) 0s 1 normal both;
            animation: -amp-start 8s steps(1,end) 0s 1 normal both
        }

        @@-webkit-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @@-moz-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @@-ms-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @@-o-keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }

        @@keyframes -amp-start {
            from {
                visibility: hidden
            }

            to {
                visibility: visible
            }
        }
    </style>
    <noscript>
        <style amp-boilerplate>
            body {
                -webkit-animation: none;
                -moz-animation: none;
                -ms-animation: none;
                animation: none
            }
        </style>
    </noscript>
    <meta name="author" content="Data Intelligence">
    <style amp-custom>
        .filter-cat {
            /* margin: 1em 0;*/
        }

        .f-cat {
            color: #fff;
            /*padding: 1em;
            border: 5px solid #fff;*/
            /* background-color: gray !important;*/
        }

        .filter-cat-results .f-cat {
            opacity: 0;
            display: none;
        }

            .filter-cat-results .f-cat.active {
                opacity: 1;
                display: block;
                -webkit-animation: fadeIn 0.65s ease forwards;
                animation: fadeIn 0.65s ease forwards;
            }

        @@-webkit-keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        @@keyframes fadeIn {
            0% {
                opacity: 0;
            }

            100% {
                opacity: 1;
            }
        }

        .card, card-header, card-footer, card-body {
            border: none;
        }

            .card:hover {
                border: 2px solid #000;
            }

        .card-body {
            padding: 0px;
            margin: 0px;
        }

        .filtering {
            background-color: #F2F2F2;
        }

        header {
            background-color: #F2F2F2;
            text-align: center;
        }

        #filtro1 {
            border: none;
            width: 98%;
            font-size: 1.1rem;
            padding: 2px 0px
        }

        #filtro2 {
            border: none;
            width: 100%;
            font-size: 1.1rem;
            padding: 2px 0px
        }
        #cardv1 {
            background-color: #524094;
            color: white;
        }
        #buscador {
            width: 80%;
            margin-left: 5%;
        }

        .cardv1 {
            max-width: 28rem;
            background-color: #ffffff;
        }
        #acard {
            color: black;
            text-decoration: none;
            cursor: default;
        }
        #icard {
            font-size: 1.2rem;
            color: gray;
            cursor: pointer;
            float: right;
        }
    </style>
  
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/all.min.js" integrity="sha512-YSdqvJoZr83hj76AIVdOcvLWYMWzy6sJyIMic2aQz5kh2bPTd9dzY3NtdeEAzPp/PhgZqr4aJObB3ym/vsItMg==" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/js/all.min.js" integrity="sha512-YSdqvJoZr83hj76AIVdOcvLWYMWzy6sJyIMic2aQz5kh2bPTd9dzY3NtdeEAzPp/PhgZqr4aJObB3ym/vsItMg==" crossorigin="anonymous"></script>

</head>
<body id="fondo">
    <div class="filtering">
        <div class="col-12 col-md-12" style="padding:0;">
            @{
                string urlImage = "/Images/INFOBOX/amp/" + ViewBag.id_padre + ".jpg";
            }

            <amp-img width="40" height="10" layout="responsive" src="@urlImage">
            </amp-img>
        </div>
      
        @*Filtros*@
        <div id="cardv1">

            <div>
                <p class="pt-1">@ViewBag.encabezadoFiltro1 </p>

                <select id="filtro1">

                    @*@foreach (var item in ViewBag.datos)
                    {
                        <option value="@item.desc_filtro1_id">@item.desc_filtro1_id</option>
                    }*@
                    <option value="cat-all">Todos</option>
                    @foreach (var item in ViewBag.filtro)
                    {
                        <option value="@item">@item</option>
                    }
                </select>
            </div>
            <div>
                <p>@ViewBag.encabezadoFiltro2</p>

                <select id="filtro2" @*class="form-control"*@>
                    <option value="cat-all">Todos</option>
                    @foreach (var item in ViewBag.filtro2)
                    {
                        <option value="@item">@item</option>
                    }
                </select>
            </div>
            <!--script y estilos de buscador-->
            <div>
                <script>
                    const removeAccents = (str) => {
                        return str.normalize("NFD").replace(/[\u0300-\u036f]/g, "");
                    }
                    function FiltroBuscar() {
                        var input, filter, contenedor, titulo, card, i, txtValue;
                        input = document.getElementById("buscador");
                        filter = removeAccents(input.value.toLowerCase());
                        contenedor = document.getElementById("myCards");
                        titulo = contenedor.getElementsByTagName("h6");
                        cartas = contenedor.getElementsByClassName("f-cat");
                        for (i = 0; i < titulo.length; i++) {
                            card = titulo[i].getElementsByTagName("a")[0];
                            txtValue = card.textContent || card.innerText;
                            if (removeAccents(txtValue.toLowerCase()).indexOf(filter) > -1) {

                                cartas[i].style.display = "";
                            } else {
                                cartas[i].style.display = "none";

                            }
                        }
                    }
                </script>

                <!--script de buscador-->
                <input type="text" id="buscador" onkeyup="FiltroBuscar()" placeholder="Buscar.." title="Ingrese un texto">
            </div>


        </div>

        <div>

            <div id="myCards" class="cards filter-cat-results">

                @foreach (var item in ViewBag.datos)
                {
                    <div class="f-cat m-1" data-cat="@item.desc_filtro1" data-cat2="@item.desc_filtro2">
                        <div class="card cardv1 mb-3">
                            <div class="card-header bg-transparent ">
                                <h6>
                                    <a href="#" id="acard">
                                        @item.titulo_box
                                        <i data-bs-toggle="modal" data-bs-target="#@item.desc_filtro1.Replace(" ","_")@item.id" id="icard" class="fas fa-expand-alt"></i>
                                    </a>
                                </h6>
                            </div>

                            <div class="card-body text-success">
                                <div class="ratio ratio-4x3">
                                    <amp-img src="@item.url_miniatura" alt="imagen card" height="215" width="290"></amp-img>
                                </div>
                            </div>
                        </div>
                    </div>

                }
            </div>
            <!--SECCIóN DE MODAL DE GRAFICOS -->
            <section>

                @foreach (var item in ViewBag.datos)
                {
                    <div class="modal fade" id="@item.desc_filtro1.Replace(" ","_")@item.id" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                        <div class="modal-dialog modal-lg">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button @*id="testModal"*@ type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                    @*<h4 class="modal-title" id="myModalLabel">Modal title</h4>*@
                                </div>
                                <div class="modal-body">
                                    <embed type="video/webm" src="@item.url_expandida" height="350" width="265" frameborder="0" allowtransparency="true">
                                    <p>
                                        @item.descripcion
                                    </p>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                </div>
                            </div>
                        </div>
                    </div>

                }
                <!-- Modal Higo -->
            </section>
        </div>

    </div>

    @*script funcional de filtro de dropdown*@
    <script>
        var filterActive;

        function filterCategory(category) {
            if (filterActive != category) {

                // reset results list
                $('.filter-cat-results .f-cat').removeClass('active');

                // elements to be filtered
                $('.filter-cat-results .f-cat')
                    .filter('[data-cat="' + category + '"]')
                    .addClass('active');

                // reset active filter
                filterActive = category;
            }
        }
        function filterCategory2(category) {
            if (filterActive != category) {

                // reset results list
                $('.filter-cat-results .f-cat').removeClass('active');

                // elements to be filtered
                $('.filter-cat-results .f-cat')
                    .filter('[data-cat2="' + category + '"]')
                    .addClass('active');

                // reset active filter
                filterActive = category;
            }
        }
        $('.f-cat').addClass('active');

        /*$('.filtering select').change(function () {*/
        $('#filtro1').change(function () {
            if ($(this).val() == 'cat-all') {
                $('.filter-cat-results .f-cat').addClass('active');
                filterActive = 'cat-all';
            } else {
                filterCategory($(this).val());
            }
        });
        $('#filtro2').change(function () {
            if ($(this).val() == 'cat-all') {
                $('.filter-cat-results .f-cat').addClass('active');
                filterActive = 'cat-all';
            } else {
                filterCategory2($(this).val());
            }
        });
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>

        function renderCard(elemento) {
            var html = '<div><div class="col-12 col-md-4 f-cat" data-cat="' + elemento.FRUTA + '">';
            html = html + '<div class="card mb-3" style="margin: auto; max-width: 28rem; background-color: #ffffff;">';
            //html = html + '<div class="card-header bg-transparent " style="border-bottom:none"><h6>';
            //html = html + '<a href="#" style="color:black;text-decoration:none;cursor:default;">' + elemento.FRUTA;
            //html = html + '<i data-bs-toggle="modal" data-bs-target="#myModal" style="font-size:1.2rem; color:gray; cursor:pointer; float:right;" title="Pantalla Completa" class="fas fa-expand-alt"></i></a>';
            //html = html + '</h6></div><div class="card-body" style="margin:0px !important;padding:0px !important;">';
            //html = html + '<div class="ratio ratio-4x3"><iframe id = "test12" src = "' + elemento.URL_MINIATURA + '" title="Higo" allowfullscreen></iframe></div>';
            html = html + '</div></div></div>';
            return html;

        }
        $.get("https://raw.githubusercontent.com/Sud-Austral/datos_monitor/main/fruta1.csv", function (data) {
            var datos = data;

            var filas = datos.split("\n");
            var tabla = []

            for (var i = 1; i < filas.length; i++) {
                //alert(fila.split(",").length)
                var registros = {
                    MERCADO: filas[i].split(",")[2],
                    TIPO_FRUTA: filas[i].split(",")[4],
                    FRUTA: filas[i].split(",")[5],
                    URL_MINIATURA: filas[i].split(",")[7],
                    URL_EXPANDIDA: filas[i].split(",")[8]
                }
                tabla.push(registros);

            }
            $("#myCards").append(renderCard(tabla[0]))
            //console.log()
            //$("#myCards").append('<div class="col-12 col-md-4 f-cat" data-cat="Frambuesa"><div class="card mb-3" style="margin: auto; max-width: 28rem; background-color: #ffffff;"><div class="card-header bg-transparent " style="border-bottom:none"><h6><a href="#" style="color:black;text-decoration:none;cursor:default;">Frambuesa<i data-bs-toggle="modal" data-bs-target="#myModal" style="font-size:1.2rem; color:gray; cursor:pointer; float:right;" title="Pantalla Completa" class="fas fa-expand-alt"></i></a></h6></div><div class="card-body" style="margin:0px !important;padding:0px !important;"><div class="ratio ratio-4x3"><iframe id="test12" src="https://analytics.zoho.com/open-view/2395394000010977241?ZOHO_CRITERIA=%22Fruta%20Consolidado%22.%22Mercado%20ID%22%3D6%20and%20%22Fruta%20Consolidado%22.%22Categor%C3%ADa%20ID%22%3D100101004" title="Higo" allowfullscreen></iframe></div></div></div></div>')
            //console.log(tabla[0]);

        });
    </script>
</body>
</html>
